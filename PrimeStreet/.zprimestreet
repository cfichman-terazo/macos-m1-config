#!/bin/zsh/
# Functions for setting up dev environment for the PrimeStreet project
# Author: Chris Fichman
# Email: chris.fichman@terazo.com

source ~/.zprimestreet-config
source ~/.zutils-develop

function primestreet_install_java() {
  install_jenv  
  install_java${PROJECT_JAVA_MAJOR_VERSION}
  jenv local ${PROJECT_JAVA_MAJOR_VERSION}.0
}

function primestreet_install_languages() {
  primestreet_install_java
  install_go
  install_pyenv
}

function primestreet_install_tools() {
  brew install --cask intellij-idea 
}

function primestreet_install_frameworks() {
  install_docker
  install_kubernetes
  install_aws
  install_twilio
  setup_twilio_profile ${TWILIO_PROFILE} ${TWILIO_PRIMESTREET_SID} ${TWILIO_PRIMESTREET_KEY}
}

function primestreet_install_databases() {
  brew install postgresql
}

# Install primestreet development dependencies
function primestreet_install(){
  primestreet_install_languages
  primestreet_install_tools
  primestreet_install_frameworks
  primestreet_install_databases
}

## Configure various libraries for primestreet development
function primestreet_configure() {
  switch_twilio_profile
  exec $SHELL -l
  # NOTE: After sourcing, you can run compaudit to ensure no permissions conflicts are present
  compaudit -D
}